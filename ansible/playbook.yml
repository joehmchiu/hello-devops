- name: test 
  hosts: mac
  vars: 
    tmp: /tmp
    run: run.sh
    url: url
  tasks: 
  - name: hello world
    debug:
      msg: "Hello World!"
  - name: output hello world
    shell: echo "Hello world! - $(date +'%T %F')" >> /tmp/foo.log
  - name: remove the artifacts
    file:
      path: "{{tmp}}/{{url}}"
      state: absent
  - name: copy script to mac
    copy:
      src: "{{root}}/{{run}}"
      dest: "{{tmp}}/{{run}}"
      mode: '0755'
  - name: build mongo api image and deploy to the kubernetes cluster
    shell: "/usr/bin/nohup {{tmp}}/{{run}}"

    #   - name: build mongo api image and deploy to the kubernetes cluster
    #     shell: |
    #       # /usr/local/bin/minikube start
